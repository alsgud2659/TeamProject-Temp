<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<link rel="stylesheet" href="/assets/css/groupPage.css" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
<style>
    .groupPageModifyFrame{
        padding-left: 240px;
        display: flex;
    width: 100%;
    align-items: stretch;
    flex-direction: column;
    }
    .groupPageModifyFrameMain{
        display: flex;
    padding-left: 20px;
    padding-right: 20px;
    align-items: stretch;
    flex-direction: column;
    }
    .groupPageModifyFormFrame{
        margin-top: 32px;
        max-width: 960px;
        position: relative;
    margin-left: auto;
    margin-right: auto;
    }
    .groupPageModifyTitleFrame{
        width: 66.6667%;
        position: relative;
    min-height: 1px;
    padding-right: 12px;
    padding-left: 12px;
    box-sizing: border-box;
    }
    .groupPageModifyCategory{
        display: flex;
    align-items: center;
    }
    .groupPageModifyCategoryDetail{
        display: flex;
    align-items: center;
    }
    .aaa1{
        min-width: 0px;
    display: inline-grid;
    text-decoration: none;
    font-size: 14px;
    color: rgb(202, 202, 202);
    line-height: 20px;
    letter-spacing: -0.15px;
    margin: 0px;
    cursor: pointer;
    }
    .groupPageModifyCategoryDetailDivide{
        margin: 0px 5px;
    position: relative;
    float:left;
    width:10px;
    height:10px;
    margin-right:5px;
    }
    .groupPageModifyCategoryDetailDivide::after {
    position: absolute;
    left: 1px; 
    top: 2px; 
    content: '';
    width: 5px; /* 사이즈 */
    height: 5px; /* 사이즈 */
    border-top: 1px solid rgb(202, 202, 202); /* 선 두께 */
    border-right: 1px solid rgb(202, 202, 202); /* 선 두께 */
    transform: rotate(45deg); /* 각도 */
    }
    .aaa2{
        text-overflow: ellipsis;
    text-decoration: none;
    white-space: nowrap;
    overflow: hidden;
    font-size: 14px;
    font-weight: bold;
    color: rgb(26, 26, 26);
    line-height: 20px;
    letter-spacing: -0.15px;
    margin: 0px;
    cursor: default;
    }
    .groupPageModifyTitleFrame h3{
        font-size: 24px;
    font-weight: bold;
    color: rgb(26, 26, 26);
    line-height: 34px;
    letter-spacing: -0.4px;
    margin: 0px;
    }
    .groupPageModifyTitleWrapper{
    display: flex;
    flex-flow: row nowrap;
    align-items: center;
    justify-content: flex-start;
    margin-bottom: 40px;
    }
    .groupPageModifyTitleLaw{
    font-size: 16px;
    font-weight: normal;
    color: rgb(102, 102, 102);
    line-height: 24px;
    letter-spacing: -0.3px;
    margin: 0px;
    }
    .tableWrapper{
    display: flex;
    flex-direction: column;
    }
    .tableTitle{
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;    
    font-size: 14px;
    font-weight: normal;
    color: rgb(58, 58, 58);
    line-height: 20px;
    letter-spacing: -0.15px;
    flex: 0 0 auto;
    margin: 0px 0px 4px;
    }
    .tableContentDetail{
        font-size: 14px;
    font-weight: normal;
    color: rgb(26, 26, 26);
    line-height: 20px;
    letter-spacing: -0.15px;
    margin: 0px;
    border-width: 1px;
    border-style: solid;
    border-radius: 3px;
    background-color: white;
    border-color: rgb(239, 239, 239);
    height: 48px;
    display: block;
    flex: 1 1 auto;
    width: 100%;
    box-sizing: border-box;
    padding: 0px 16px;
    }
    .groupPageModifyFormWrapper{
        display: flex;
    flex-flow: row nowrap;
    align-items: center;
    justify-content: flex-start;
    margin-bottom: 32px;
    }
    .groupPageModifyFormWrapper2{
        width: 100%;
        position: relative;
    min-height: 1px;
    padding-right: 12px;
    padding-left: 12px;
    box-sizing: border-box;
    }
    .groupPageFormDivide{
        margin-bottom: 20px;
    }
    .groupPageModifySubmitButton{
        color: rgb(255, 255, 255);
    background-color: #1F89FF;
    width: auto;
    display: inline-flex;
    vertical-align: middle;
    border-radius: 3px;
    font-weight: 500;
    font-size: 14px;
    letter-spacing: -0.2px;
    padding: 0px 16px;
    height: 40px;
    transition: background-color 0.1s ease 0s;
    text-decoration-line: none;
    border: 2px solid rgb(255, 242, 233);
    }
</style>
<body>
    <div class="main">
        <div class="groupPageFrame">        
            <!-- 헤더 -->
            <div class="groupPageTitleFrame">
                <div class="groupPageTitleForm">
                    <div class="groupPageTitleBox">
                    <header class="groupPageHeaderFrame">
                        <div class="groupPageHeaderForm">
                            <div class="groupPageHeaderBox">
                            <span class="material-symbols-outlined">directions_walk</span>                                                        
                            <a href="#" class="groupPageHeader">Plogger Center</a>
                            <div class="htBoundary"></div>
                            <div class="groupPageProfileFrame">
                                <div class="groupPageProfileBox">
                                <div class="groupPageProfileForm">                                
                                    <div class="groupPageProfileContainer">
                                        <picture class="groupPageProfile">
<!--                                            <source srcset="/src/main/resources/static/images/chun2.png" media="all and (min-width: 1024px)" >-->
                                            <img th:src="${ }" class="profileImage" alt="">
                                        </picture>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        </div>                    
                    </header>
                </div>
                <div class="boundary"></div>
                </div>            
            </div>
            <div class="groupPageBodyFrame">
                <!-- 사이드바 -->
                <div class="groupPageSidebarFrame">
                    <div class="groupPageSidebarForm">
                        <div class="groupPageSidebarList">
                            <div class="groupPageSidebar">
                                <div class="groupPageSidebars">
                                    <div class="sNoticeFrame">
                                        <div class="sNoticeForm">
                                            <div class="sNoticeBox">
                                                <span class="material-symbols-outlined" id="gfSize">notifications</span>
                                                <div class="margin"></div>
                                                <a class="sTitle" href="notice.html">공지사항</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="sGroupInfoFrame">
                                        <div class="sGroupInfoForm">
                                            <div class="sGroupInfoBox">
                                            <span class="material-symbols-outlined" id="gfSize">group</span>                                                                                        
                                            <div class="margin"></div>
                                            <a class="sTitle" href="#">단체 정보</a> 
                                        </div>
                                        </div>
                                    </div>
                                    <div class="sProjectFrame">
                                        <div class="sProjectForm">
                                            <div class="sProjectTitleForm">
                                                <div class="sProjectTitleBox">
                                                <span class="material-symbols-outlined" id="gfSize">list</span>                                                                                                
                                                <div class="margin"></div>
                                                <a class="sTitle" href="main.html">프로젝트</a>
                                                </div>   
                                            </div>
                                            <span id="listClose" class="material-symbols-outlined show">expand_less</span>                        
                                        </div>
                                    </div>
                                    <div class="sProjectContainer">
                                        <a class="sProjectList" href="main.html">전체 플로깅</a>
                                        <a class="sProjectQna" href="#">플로깅 문의</a>
                                    </div>
                                    
                                    <div class="sGuideFrame">
                                        <div class="sGuideForm">
                                            <div class="sGuideBox">
                                            <span class="material-symbols-outlined" id="gfSize">help</span>                                                                                        
                                            <div class="margin"></div>
                                            <a class="sTitle" href="#">플로거 가이드 센터</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="sideBarBoundary"></div>
                    </div>
                </div>                   
                </div>
                <!-- 우측 메인내용 -->
                <div class="groupPageModifyFrame" th:object="${company}">
                    <div class="groupPageModifyFrameMain">
                        <form method="post" action="/group/modifyForm" name="modifyForm">
                            <input type="hidden" name="num" th:value="*{num}">
                            <div class="groupPageModifyFormFrame">
                                <div class="groupPageModifyTitleWrapper">
                                <div class="groupPageModifyTitleFrame">
                                    <div style="margin-bottom: 20px;"></div>
                                    <h3>단체 정보</h3>
                                    <div style="margin-bottom: 4px;"></div>
                                    <div class="groupPageModifyTitleLaw">단체 정보는 하단의 내용만 수정이 가능합니다</div>
                                </div>
                                </div>
                                <!-- 프로필 수정 -->
                                <div class="groupIntroProfileFrame">
                                    <label class="groupIntroProfileTitle">프로필</label>
                                    <label for="attach" class="groupIntroProfileInsertFrame" >
                                        <input type="file" id="attach" class="groupProfile" name="uploadFiles">
                                        <div class="imgBox"></div>
                                        <div class="groupIntroProfileForm">
                                            <div class="groupIntroProfileBox">
                                                <span class="showGroupProfile">
                                                    <picture class="showGroupImg">
                                                        <img th:src="@{/groupFile/display?fileName=} + ${company.profileUploadPath} + @{/} + ${company.profileFileName}" id="companyImg" style="max-width: 100%; height: auto;">
                                                    </picture>
                                                </span>
                                            </div>
                                            <div class="insertImgIcon">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24">
                                                    <path fill-rule="evenodd" d="M9 3h6l1.83 2H20c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V7c0-1.1.9-2 2-2h3.17L9 3zm6.2 10c0 2.133-1.067 3.2-3.2 3.2S8.8 15.133 8.8 13 9.867 9.8 12 9.8s3.2 1.067 3.2 3.2zM12 18c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5z" fill="#FFF"></path></svg>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                                <!-- 프로필 수정 -->
                                <div class="groupPageModifyFormWrapper">
                                <div class="groupPageModifyFormWrapper2">
                                    <div class="groupPageFormDivide"></div>
                                    <div class="tableWrapper">
                                        <div class="tableTitle">담당자 전화번호</div>
                                        <div class="tableContent">
                                            <input type="text" class="tableContentDetail" th:value="*{phone}" name="phone"></intput>
                                        </div>
                                    </div>
                                    <div class="groupPageFormDivide"></div>
                                    <div class="tableWrapper">
                                        <div class="tableTitle">기업 공식 전화번호</div>
                                        <div class="tableContent">
                                            <input type="text" class="tableContentDetail" th:value="*{businessPhone}" name="businessPhone"></intput>
                                        </div>
                                    </div>
                                    <div class="groupPageFormDivide"></div>
                                    <div class="tableWrapper">
                                        <div class="tableTitle">회사주소</div>
                                        <div class="tableContent">
                                            <input type="text" class="tableContentDetail" th:value="*{address}" name="address"></intput>
                                            <input type="text" class="tableContentDetail" style="margin-top: 10px;" th:value="*{addressDetail}" name="addressDetail"></intput>
                                        </div>
                                    </div>
                                    <div class="groupPageFormDivide"></div>
                                    <!-- 유효성 검사  -->
                                    <input type="button" class="groupPageModifySubmitButton" id="submitBtn" value="수정"></input>
                                </div>
                                </div>
                            </div>
                        </form>
                    </div>

                </div>

            </div>
        </div>
    </div>    
</body>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script>

    $("input[type='file']").on("change", function (e) {
        let formData =   new FormData();
        let inputFile = $("input[name='uploadFiles']");
        for(let i=0; i<inputFile.length; i++){
            if($(inputFile[i]).val() != ""){
                formData.append("uploadFiles", inputFile[i].files[0]);
                console.log(inputFile[i].files[0]);
            }
        };
        $.ajax({
            url: "/groupFile/upload",
            type: "post",
            data: formData,
            contentType: false,
            processData: false,
            success: function (file) {
                    console.log(file.profileFileName);
                    console.log(file.profileUploadPath);
                    str = "";
                    str += "<input type='hidden' name='profileFileName' value='" + file.profileFileName + "'>"
                    str += "<input type='hidden' name='profileUploadPath' value='" + file.profileUploadPath + "'>"
                    $('#companyImg').attr("src", "/groupFile/display?fileName=" + file.profileUploadPath + "/" + file.profileFileName);
                $('.imgBox').html(str);

            }
        });
    });

    $('#submitBtn').on("click", function () {
        modifyForm.submit();
    })



</script>

</html>